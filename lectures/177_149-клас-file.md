---
layout: default
title: "14.9 Клас File"
---

# 14.9 Клас File

У середовищі .NET Framework визначений клас File , який може бути корисним для роботи з файлами, оскільки він містить кілька статичних методів, що виконують типові операції над файлами. Зокрема, в класі File є методи для копіювання та переміщення, шифрування та розшифрування, видалення файлів, а також для отримання та встановлення інформації про файли, включаючи дані про їх існування, час створення, останнього доступу та різні атрибути файлів (тільки для читання, прихованих тощо). Крім того, в класі File є кілька зручних ме тодів для читання з файлів та запису в них, відкриття файлу та отримання посилання типу FileStream на нього . У класі File міститься занадто багато методів для детального їх розгляду, тому ми зосередимося лише на трьох з них. Спочатку буде представлений метод Сору() , а потім — методи Exists() та GetLastAccessTime() . На прикладі цих методів ви зможете отримати чітке уявлення про те, наскільки зручні методи, доступні в класі File. І тоді вам стане зрозуміло, що клас File однозначно заслуговує більш докладного вивчення.

Раніше в цьому розділі був продемонстрований приклад програми, в якій файл копіювався вручну шляхом читання байтів з одного файлу та запису в інший. І хоча задача копіювання файлів не представляє особливих труднощів, її можна повністю автоматизувати за допомогою методу Copy() , визначеного в класі File . Нижче представлені дві форми його оголошення.

static void Copy (string ім'я_вихідного_файлу, string ім'я_цільового_файлу)

static void Copy (string ім'я_вихідного_файлу, string ім'я_цільового_файлу, boolean overwrite)

Метод Copy() копіює файл, на який вказує ім'я_вихідного_файлу , в файл, на який вказує ім'я_цільового_файлу . У першій формі цей метод копіює файл тільки у випадку, якщо файл, на який вказує ім'я_цільово- го_файлу , ще не існує. А в другій формі копія замінює і перезаписує цільовий файл, якщо він існує і якщо параметр overwrite приймає логічне значення true. Але в обох випадках можуть бути згенеровані декілька видів винятків, включаючи IOException і FileNotFoundException.

За допомогою методів класу File дуже легко отримати потрібну інформацію про файл. Розглянемо два таких методи: Exists() і GetLastAccessTime() . Метод Exists() визначає, чи існує файл, а метод GetLastAccessTime() повертає дату і час останнього доступу до файлу. Нижче наведено форми оголошення обох методів

static bool Exists(string шлях)

static DateTime GetLastAccessTime(string шлях)

У обох методахшляхозначає файл, про який потрібно отримати інформацію. Метод Exists() повертає логічне значення true , якщо файл існує і доступний для викликаючого процесу. А метод GetLastAccessTime() повертає структуру DateTime , що містить дату і час останнього доступу до файлу. (Структура DateTime описується далі в цій книзі, але метод ToString() автоматично перетворює дату і час в зручний для читання вигляд.) З вказанням недійсних аргумен тів або прав доступу при виклику обох розглянутих тут методів може бути пов'язано ціле розмаїття винятків, але насправді генерується лише виняття IOException. У наведеному нижче прикладі програми методи Exists() і GetLastAccessTime() демонструються в дії. У цій програмі спочатку визначається, чи існує файл під назвою test.txt . Якщо він існує, то на екран виводиться час останнього доступу до нього.

Лістинг 14.7 - Застосувати методи Exists() і GetLastAccessTime()

using System;

using System.IO;

class ExistsDemo

{

static void Main()

{

if (File.Exists("test.txt"))

Console.WriteLine("Файл існує. Останній раз він був доступний " +

File.GetLastAccessTime("test.txt"));

else

Console.WriteLine("Файл не існує");

}

}

Крім того, час створення файлу можна дізнатися, викликавши метод GetCreationTime (), а час останнього запису в файл, викликавши метод GetLastWriteTime(). Існують також варіанти цих методів для представлення даних про файл у форматі всесвітнього координованого часу (UTC). Спробуйте експериментувати з ними.
