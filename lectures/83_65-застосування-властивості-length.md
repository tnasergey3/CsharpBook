---
layout: default
title: "6.5 Застосування властивості Length"
---

# 6.5 Застосування властивості Length

Реалізація в C# масивів у вигляді об'єктів надає цілий ряд переваг. Одне з них полягає в тому, що з кожним масивом пов'язана властивість Length, що містить кількість елементів, з яких може складатися масив. Отже, у кожного масиву є спеціальна властивість, що дозволяє визначити його довжину. Нижче наведено приклад програми, в якій демонструється ця властивість (лістинг 6.10).

Лістинг 6.10 – Використання властивості Length

// Використовувати властивість Length масиву.

using System;

class LengthDemo

{

static void Main()

{

int[] nums = new int[10];

Console.WriteLine("Довжина масиву nums дорівнює " + nums.Length);

// Використовувати властивість Length для ініціалізації масиву nums.

for (int i = 0; i < nums.Length; i++)

nums[i] = i * i;

// А тепер скористатися властивістю Length

// для виведення вмісту масиву nums.

Console.Write("Вміст масиву nums: ");

for (int i = 0; i < nums.Length; i++)

Console.Write(nums[i] + " ");

Console.WriteLine();

}

}

При виконанні цієї програми отримується наступний результат.

Довжина масиву nums дорівнює 10

Вміст масиву nums: 0 1 4 9 16 25 36 49 64 81

Зверніть увагу на те, як у класі LengthDemo властивість nums.Length використовується в циклах for для керування кількістю повторюваних кроків циклу. У кожного масиву є своя довжина, тому замість відстеження розміру масиву вручну можна використовувати інформацію про його довжину. Слід, однак, мати на увазі, що значення властивості Length ніяк не відображає кількість елементів, які в ньому використовуються насправді. Властивість Length містить лише кількість елементів, з яких може складатись масив.

Коли запитується довжина багатовимірного масиву, то повертається загальна кількість елементів, з яких може складатися масив, як у наведеному нижче прикладі коду (лістинг 6.11).

Лістинг 6.11 – Використання властивості Length для тривимірного масиву

// Використовувати властивість Length тривимірного масиву.

using System;

class LengthDemo3D

{

static void Main()

{

int[,,] nums = new int[10, 5, 6];

Console.WriteLine("Довжина масиву nums дорівнює " + nums.Length);

}

}

При виконанні цього коду отримується наступний результат.

Довжина масиву nums дорівнює 300

Як підтверджує наведений вище результат, властивість Length містить кількість елементів, з яких може складатися масив (у цьому випадку - 300 (10×5×6) еле ментів). Проте властивість Length не можна використовувати для визначення довжини масиву в окремому його вимірі.

Завдяки наявності у масивів властивості Length операції з масивами в багатьох алгоритмах стають простішими, а отже, й надійнішими. Як приклад використовується властивість Length у наведеній нижче програмі з метою поміняти місцями вміст елементів масиву, скопіювавши їх у зворотному порядку в інший масив (лістинг 6.12).

Лістинг 6.12 – Поміняти місцями вміст елементів масиву

// Поміняти місцями вміст елементів масиву.

using System;

class RevCopy

{

static void Main()

{

int i, j;

int[] nums1 = new int[10];

int[] nums2 = new int[10];

for (i = 0; i < nums1.Length; i++) nums1[i] = i;

Console.Write("Початковий вміст масиву: ");

for (i = 0; i < nums2.Length; i++)

Console.Write(nums1[i] + " ");

Console.WriteLine();

//Скопіювати елементи масиву nums1

// в масив nums2 у зворотному порядку.

if (nums2.Length >= nums1.Length) //  перевірити, чи достатньо

//  довжини масиву nums2

for (i = 0, j = nums1.Length - 1; i < nums1.Length; i++, j--)

nums2[j] = nums1[i];

Console.Write("Вміст масиву у зворотному порядку: ");

for (i = 0; i < nums2.Length; i++)

Console.Write(nums2[i] + " ");

Console.WriteLine();

}

}

Виконання цієї програми дає наступний результат.

Початковий вміст масиву: 0 1 2 3 4 5 6 7 8 9

Вміст масиву у зворотному порядку: 9 8 7 6 5 4 3 2 1 0

У даному прикладі властивість Length допомагає виконати дві важливі функції. По-перше, вона дозволяє переконатися, що довжини цільового масиву достатньо для збереження вмісту початкового масиву. І по-друге, вона надає умову для завершення циклу for, в якому відбувається копіювання початкового масиву в зворотному порядку. Звичайно, у цьому простому прикладі розміри масивів легко вияснити і без властивості Length, але аналогічний підхід може бути застосований в цілому ряді інших, більш складних ситуацій.

### 6.5.1 Застосування властивості Length при роботі зі ступінчастими масивами

Особливий випадок представляє застосування властивості Length при роботі зі ступінчастими масивами. У цьому випадку за допомогою даної властивості можна отримати довжину кожного масиву, що складає ступінчастий масив. На прикладі розглянемо наступну програму, в якій імітується робота центрального процесора ( ЦП) в мережі, що складається з чотирьох вузлів (лістинг 6.13).

Лістинг 6.13 – Застосування Length при роботі зі ступінчастими масивами

// Показати застосування властивості Length

// при роботі зі ступінчастими масивами.

using System;

class Jagged

{

static void Main()

{

int[][] network_nodes = new int[4][];

network_nodes[0] = new int[3];

network_nodes[1] = new int[7];

network_nodes[2] = new int[2];

network_nodes[3] = new int[5];

int i, j;

// Сфабрикувати дані про використання ЦП.

for (i = 0; i < network_nodes.Length; i++)

for (j = 0; j < network_nodes[i].Length; j++)

network_nodes[i][j] = i * j + 70;

Console.WriteLine("Загальна кількість вузлів мережі: " +

network_nodes.Length + "\n");

for (i = 0; i < network_nodes.Length; i++)

{

for (j = 0; j < network_nodes[i].Length; j++)

{

Console.Write("Використання в вузлі мережі " + i +

" ЦП " + j + ": ");

Console.Write(network_nodes[i][j] + "% ");

Console.WriteLine();

}

Console.WriteLine();

}

}

}

При виконанні цієї програми отримується наступний результат.

Загальна кількість вузлів мережі: 4

Використання в вузлі 0 ЦП 0: 70%

Використання в вузлі 0 ЦП 1: 70%

Використання в вузлі 0 ЦП 2: 70%

Використання в вузлі 1 ЦП 0: 70%

Використання в вузлі 1 ЦП 1: 71%

Використання в вузлі 1 ЦП 2: 72%

Використання в вузлі 1 ЦП 3: 73%

Використання в вузлі 1 ЦП 4: 74%

Використання в вузлі 1 ЦП 5: 75%

Використання в вузлі 1 ЦП 6: 76%

Використання в вузлі 2 ЦП 0: 70%

Використання в вузлі 2 ЦП 1: 72%

Використання в вузлі 3 ЦП 0: 70%

Використання в вузлі 3 ЦП 1: 73%

Використання в вузлі 3 ЦП 2: 76%

Використання в вузлі 3 ЦП 3: 79%

Використання в вузлі 3 ЦП 4: 82%

Зверніть особливу увагу на те, як властивість Length використовується в ступінчастому масиві network_nodes. Нагадаємо, що двовимірний ступінчастий масив представляє собою масив масивів. Отже, коли використовується вираз network_nodes.Length то в ньому визначається кількість масивів, що зберігаються в масиві network_nodes (у даному випадку - чотири масиви). А для отримання довжини будь-якого окремого масиву, що складає ступінчастий масив, використовується наступний вираз.

n.etwork_nodes[0].Length

У даному випадку це довжина першого масиву.
