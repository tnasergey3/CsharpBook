---
layout: default
title: "10.4 Багатовимірні індексатори"
---

# 10.4 Багатовимірні індексатори

Індексатори можна створювати і для багатовимірних масивів. Як приклад нижче наведено двовимірний надійний масив. Зверніть особливу увагу на оголошення індексатора в цьому прикладі.

Лістинг 10.7 - Двовимірний масив з відмовостійкістю.

class FailSoftArray2D

{

int[,] a; // посилання на базовий двовимірний масив

int rows, cols; // розміри масиву

public int Length; // відкрита змінна довжини масиву

public bool ErrFlag; // позначає результат останньої операції

// Побудувати масив заданих розмірів.

public FailSoftArray2D(int r, int с)

{

rows = r;

cols = с;

а = new int[rows, cols];

Length = rows * cols;

}

// Це індексатор для класу FailSoftArray2D.

public int this[int index1, int index2]

{

// Це аксесор get.

get

{

if (ok(index1, index2))

{

ErrFlag = false;

return a[index1, index2];

}

else {

ErrFlag = true;

return 0;

}

}

// Це аксесор set.

set

{

if (ok(index1, index2))

{

a[index1, index2] = value;

ErrFlag = false;

}

else ErrFlag = true;

}

}

// Повернути логічне значення true, якщо

// індекси знаходяться в установлених межах.

private bool ok(int index1, int index2)

{

if (index1 >= 0 & index1 < rows &

index2 >= 0 & index2 < cols)

return true;

return false;

}

}

class TwoDIndexerDemo

{

static void Main()

{

FailSoftArray2D fs = new FailSoftArray2D(3, 5);

int x;

// Виявити приховані збої.

Console.WriteLine("Прихована помилка.");

for (int i = 0; i < 6; i++)

fs[i, i] = i * 10;

for (int i = 0; i < 6; i++)

{

x = fs[i, i];

if (x != -1) Console.Write(x + " ");

}

Console.WriteLine();

// А тепер показати збої.

Console.WriteLine(" Помилка з повідомленням про помилку.");

for (int i = 0; i < 6; i++)

{

fs[i, i] = i * 10; if (fs.ErrFlag)

Console.WriteLine("fs[" + i + ", " + i + "] поза межами");

}

for (int i = 0; i < 6; i++)

{

x = fs[i, i];

if (!fs.ErrFlag) Console.Write(x + " ");

else

Console.WriteLine("fs[" + i + ", " + i + "] поза межами");

}

}

}
