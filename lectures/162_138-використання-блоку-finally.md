---
layout: default
title: "13.8 Використання блоку finally"
---

# 13.8 Використання блоку finally

Іноді потрібно визначити кодовий блок, який буде виконуватися після виходу з блоку try/catch . Зокрема, виняткова ситуація може виникнути у зв'язку з помилкою, що призводить до передчасного повернення з поточного методу. Але в цьому методі може бути відкритий файл, який потрібно закрити, або встановлене мережеве з'єднання, яке потребує розриву. Подібні ситуації не рідкість у програмуванні, тому для їх вирішення в C# передбачений зручний спосіб: скористатися блоком finally.

Щоб вказати кодовий блок, який має виконуватися після блоку try/catch, достатньо вставити блок finally в кінець послідовності операторів try/catch. Нижче наведена загальна форма спільного використання блоків try/ catchі finally.

Лістинг 13.12 - Приклад структури try catch finally

try

{

// Блок коду, призначений для обробки помилок.

}

catch (ExcepType1 exOb)

{

// Обробник винятку типу ExcepType1.

}

catch (ExcepType2 ехОb)

{

// Обробник винятку типу ЕхсерТуре2.

}

finally

{

// Код завершення обробки винятків.

}

Блок finally буде виконуватися кожного разу, коли відбувається вихід з блоку try/ catch, незалежно від причин, які до цього призвели. Це означає, що якщо блок try завершується нормально або через виняток, то останнім виконується код, визначений у блоку finally. Блок finally виконується і у випадку, якщо будь-який код у блоку tryабо в пов'язаних з ним блоках catch призводить до повернення з методу.
