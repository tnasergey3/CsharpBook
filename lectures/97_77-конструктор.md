---
layout: default
title: "7.7 Конструктор"
---

# 7.7 Конструктор

У наведених вище прикладах програм змінні екземпляра кожного об'єкта типу Building доводилося ініціалізувати вручну, використовуючи, зокрема, наступну послідовність операторів.

house.Occupants = 4;

house.Area = 2500;

house.Floors = 2;

Такий прийом зазвичай не застосовується в професійно написаному коді C#. Крім того, він може призвести до помилок (ви можете просто забути ініціалізувати одне з полів). Однак, існує кращий спосіб вирішити подібну задачу: скористатися конструктором.

Конструктор ініціалізує об'єкт при його створенні. У конструктора таке же

ім'я, як і у його класу, а з точки зору синтаксису він схожий на метод. Але у конструкторів немає повертаємого типу, явно вказаного. Нижче наведена загальна форма конструктора.

доступ ім'я_класу(список_параметрів) {

// тіло конструктора

}

Зазвичай конструктор використовується для задання початкових значень змінних екземпляра, визначених у класі, або для виконання будь-яких інших установчих процедур, які потрібні для створення повністю сформованого об'єкта. Крім того, доступ зазвичай представляє собою модифікатор доступу типу public , оскільки конструктори часто викликаються в класі. А список_па- раметрів може бути як порожнім, так і складатися з одного або більше вказуваних параметрів.

У всіх класах є конструктори, незалежно від того, чи ви їх визначили, чи

ні, оскільки в C# автоматично надається конструктор, який використовується за замовчуванням і ініціалізує всі змінні екземпляра їх значеннями за замовчуванням. Для більшості типів даних значенням за замовчуванням є ну

льове, для типу bool— значення false, а для посилальних типів — порожнє значення. Але як тільки ви визначите свій власний конструктор, конструктор за замовчуванням більше не використовується.

Лістинг 7.14 - Простий конструктор

using System;
class MyClass {
    public int x;
    public MyClass() {
        x = 10;
    }
}
class ConsDemo {
    static void Main() {
        MyClass t1 = new MyClass();
        MyClass t2 = new MyClass();
        Console.WriteLine(t1.x + " " + t2.x);
    }
}

Зверніть увагу на те, що цей конструктор позначається як public. Справа

в тому, що його потрібно викликати з коду, що визначений поза межами його класу.

У цьому конструкторі змінній екземпляра класу MyClass присвоюється значеня 10. Він викликається в операторі new при створенні об'єкта. Наприклад, у наступному рядку:

MyClass t1 = new MyClass();

конструктор MyClass() викликається для об'єкта t1, присвоюючи змінній його екземпляра t1.хзначення 10. Те саме стосується і об'єкта t2. Після конструювання змінна t2.х буде містити те саме значення 10. Отже, виконання наведеного вище коду призведе до наступного результату. 10 10.

У попередньому прикладі використовувався конструктор без параметрів. У деяких випадках цього виявляється достатньо, але часто конструктор повинен приймати один або кілька параметрів. У конструктор параметри вводяться так само, як і в метод. Для цього достатньо оголосити їх у дужках після імені конструктора. Нижче наведено приклад застосування параметризованого конструктора MyClass.

Лістинг 7.15 Приклад класу с параметризованим конструктором

using System;
class MyClass {
    public int x;
    public MyClass(int i) {
        x = i;
    }
}
class ParmConsDemo {
    static void Main() {
        MyClass t1 = new MyClass(10);
        MyClass t2 = new MyClass(88);
        Console.WriteLine(t1.x + " " + t2.x);
    }
}

При виконанні цього коду отримується наступний результат.
