---
layout: default
title: "11.5 Виклик конструкторів базового класу"
---

# 11.5 Виклик конструкторів базового класу

За допомогою форми розширеного оголошення конструктора похідного класу і ключового слова base у похідному класі може бути викликаний конструктор, визначений в його базовому класі. Нижче наведена загальна форма цього розширеного оголошення:

конструктор_похідного_класу(список_параметрів) :base(список_аргументів) { // тіло конструктора }

де список_аргументів означає будь-які аргументи, необхідні конструктору у базовому класі. Зверніть увагу на розташування двокрапки. Для того, щоб продемонструвати застосування ключового слова base на конкретному прикладі, розглянемо ще один варіант класу TwoDShape у наведеній нижче програмі. У даному прикладі визначається конструктор, що ініціалізує властивості Width і Height. Потім цей конструктор викликається конструктором класу Triangle.

Лістинг 11.7 - Додати конструктор в клас TwoDShape

class TwoDShape

{

double pri_width;

double pri_height;

// Конструктор класу TwoDShape.

public TwoDShape(double w, double h)

{

Width = w;

Height = h;

}

// Властивості ширини і висоти об'єкта.

public double Width

{

get { return pri_width; }

set { pri_width = value < 0 ? value: value; }

}

public double Height

{

get { return pri_height; }

set { pri_height = value < 0 ? value: value; }

}

public void ShowDim()

{

Console.WriteLine("Ширина і висота дорівнюють " +

Width + " і " + Height);

}

}

// Клас для трикутників, похідний від класу TwoDShape.

class Triangle : TwoDShape

{

string Style;

// Викликати конструктор базового класу.

public Triangle(string s, double w, double h) : base(w, h)

{

Style = s;

}

// Повернути площу трикутника.

public double Area()

{

return Width * Height / 2;

}

// Показати тип трикутника.

public void ShowStyle()

{

Console.WriteLine("Трикутник " + Style);

}

}

Тепер конструктор класу Трикутник оголошується наступним чином.

public Triangle( string s, double w, double h) : base(w, h) {

У даному варіанті конструктор Трикутник() викликає метод base з параметрами w і h . Це, в свою чергу, призводить до виклику конструктора TwoDShape() , що ініціалізує властивості Width і Height значеннями параметрів w і h . Вони більше не ініціалізуються засобами самого класу Трикутник , де тепер залишається ініціалізувати лише його власний член Style , що визначає тип трикутника. Завдяки цьому класу TwoDShape він звільняється від будь-якого обмеження щодо конструювання свого підоб'єкта. Більше того, в класі TwoDShape можна ввести функції, про які похідні класи навіть не будуть підозрювати, що запобігає порушенню існуючого коду.

За допомогою ключового слова base можна викликати будь-який конструктор, визначений у базовому класі, причому виконуватиметься лише той конструктор, параметри якого відповідають переданим аргументам. Нижче наведено розширені варіанти класів TwoDShape і Triangle , в які включені як конструктори за замовчуванням, так і конструктори, які приймають один аргумент.

Лістинг 11.8 - Додати додаткові конструктори в клас TwoDShape

class TwoDShape

{

double pri_width;

double pri_height;

// Конструктор, викликається за замовчуванням.

public TwoDShape()

{

Width = Height = 0.0;

}

// Конструктор класу TwoDShape.

public TwoDShape(double w, double h)

{

Width = w;

Height = h;

}

// Побудувати об'єкт з однаковою шириною і висотою.

public TwoDShape(double х)

{

Width = Height = x;

}

// Властивості ширини і висоти об'єкта.

public double Width

{

get { return pri_width; }

set { pri_width = value < 0 ? value: value; }

}

public double Height

{

get { return pri_height; }

set { pri_height = value < 0 ? value: value; }

}

public void ShowDim()

{

Console.WriteLine("Ширина і висота дорівнюють " +

Width + " і " + Height);

}

}

// Клас для трикутників, похідний від класу TwoDShape.

class Triangle : TwoDShape

{

string Style;

/* Конструктор, використовується за замовчуванням.

Автоматично викликає конструктор, доступний за

замовчуванням в класі TwoDShape. */

public Triangle()

{

Style = "null";

}

// Конструктор, що приймає три аргументи.

public Triangle(

string s, double w, double h) : base(w, h)

{

Style = s;

}

// Побудувати рівнобедрений трикутник.

public Triangle(double x) : base(x)

{

Style = "рівнобедрений";

}

// Повернути площу трикутника.

public double Area()

{

return Width * Height / 2;

}

// Показати тип трикутника.

public void ShowStyle()

{

Console.WriteLine("Трикутник " + Style);

}

}

А тепер розглянемо коротко основні принципи дії ключового слова base. Коли в похідному класі вказується ключове слово base, викликається конструктор з його безпосереднього базового класу. Отже, ключове слово baseзавжди звертається до базового класу, що стоїть в ієрархії безпосередньо над викликаю чим класом. Це справедливо навіть для багаторівневої ієрархії класів. Аргумен ти передаються базовому конструктору як аргументи методу base(). Якщо ж ключове слово відсутнє, то автоматично викликається конструктор, використовуваний в базовому класі за замовчуванням.
