---
layout: default
title: "8.5 Способи передачі аргументів методу"
---

# 8.5 Способи передачі аргументів методу

Як показує вищезазначений приклад, передача об'єкта методу за посиланням робиться досить просто. Але в цьому прикладі не показані всі нюанси даного процесу. У деяких випадках наслідки передачі об'єкта за посиланням будуть відрізнятися від результатів, до яких призводить передача значення звичайного типу.

Для вияснення причин цих відмінностей розглянемо два способи передачі аргументів методу. Першим способом є виклик за значенням. У цьому випадку значення аргумента копіюється в формальний параметр методу.. Отже, зміни, внесені в параметр методу, не впливають на аргумент, використаний для ви

клику. А другим способом передачі аргумента є виклик за посиланням. У цьому випадку параметру методу передається посилання на аргумент, а не значення аргумента. У методі це посилання використовується для доступу до конкретного аргументу, вказаного при ви клику.

Це означає, що зміни, внесені в параметр, будуть впливати на аргумент, використаний для виклику методу. За замовчуванням в C# використовується передача за значенням, що означає, що створюється копія аргументу і передається приймаючому параметру. Отже, при передачі значення звичайного типу, наприклад int або double , все, що відбувається з параметром, що приймає аргумент, не має жодного впливу за межами методу. Як приклад розглянемо наступну програму.

Лістинг 8.3 - Передача аргументів звичайних типів за значенням

using System;
class Test {
/* Цей метод не має жодного впливу на
аргументи, що використовуються для його виклику. */
    public void NoChange(int i, int j) {
        i = i + j;
        j = ++j;
    }
}
class CallByValue {
    static void Main() {
        Test ob = new Test();
        int a = 15, b = 20;
        Console.WriteLine("а і b до виклику: " + a + " " + b);
        ob.NoChange(a, b);
        Console.WriteLine("а і b після виклику: " + a + " " + b);
    }
}

Як бачите, операції, виконувані в методі NoChange(), не мають жодного

впливу на значення аргументів аі b, використовуваних для виклику цього методу. Це знову пояснюється тим, що параметрам i і j передані копії значень аргументів а і b, а самі аргументи а і b зовсім не залежать від параметрів i і j.

Зокрема, присвоєння параметру i нового значення не матиме жодного впливу на аргумент а. Справа трохи ускладнюється при передачі методу посилання на об'єкт. У цьому випадку саме посилання все ще передається за значенням. Отже, створюється копія посилання, а зміни, внесені в параметр, не впливають на аргу мент. (Так, якщо організувати посилання параметра на новий об'єкт, то ця зміна не призведе до наслідків для об'єкта, на який посилається аргумент).

Але головна відмінність виклику за посиланням полягає в тому, що зміни, які відбуваються з об'єктом, на який посилається параметр, впливатимуть на той об'єкт, на який посилається аргумент. Спробуємо з'ясувати причини подібного впливу. Нагадаємо, що при створенні змінної типу класу формується лише посилання на об'єкт. Тому при передачі цього посилання методу, що його приймає параметр буде посилатися на той самий об'єкт, на який посилається аргумент.

Це означає, що як аргумент, так і параметр посилаються на один і той самий об'єкт і що об'єкти, по суті, передаються методам посиланням. Отже, об'єкт в методі буде впливати на об'єкт, що використовується як аргумент. Для прикладу розглянемо наступну програму.

Лістинг 8.4 - Передача об'єктів посиланням.

using System;
class Test {
    public int a, b;
    public Test(int i, int j) {
        a = i;
        b = j;
    }
    /* Передати об'єкт. Тепер змінні ob.а і ob.b з об'єкта
     використаного при виклику методу, будуть зміне,ні. */
    public void Change(Test ob) {
        ob.a = ob.a + ob.b;
        ob.b = ++ob.b;
    }
}
class CallByRef {
    static void Main() {
        Test ob = new Test(15, 20);
        Console.WriteLine("ob.а і ob.b до виклику: " +
                          ob.a + " " + ob.b);
        ob.Change(ob);
        Console.WriteLine("ob.а і ob.b після виклику: " +
                          ob.a + " " + ob.b);
    }
}

Як бачите , дії в методі Change() показали в даному випадку вплив на об'єкт, що використовувався як аргумент. Так, підведемо короткий підсумок. Коли об'єкт передається методу за посиланням, саме посилання передається за значенням, і, отже, створюється копія цього посилання.

Але ця копія все ще буде посилатися на той самий об'єкт, що і відповідний аргумент. Це означає, що об'єкти передаються методам неявним чином за посиланням.
