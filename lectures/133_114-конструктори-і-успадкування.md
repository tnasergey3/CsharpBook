---
layout: default
title: "11.4 Конструктори і успадкування"
---

# 11.4 Конструктори і успадкування

У ієрархії класів допускається, щоб у базових і похідних класів були свої власні конструктори. У зв'язку з цим виникає наступне розумне питання: який конструктор відповідає за побудову об'єкта похідного класу: конструктор базового класу, конструктор похідного класу або обидва? На це питання можна відповісти так: конструктор базового класу будує базову частину об'єкта, а кон структор похідного класу - похідну частину цього об'єкта. І в цьому є своя логіка, оскільки базовому класу невідомі і недоступні будь-які елементи похід ного класу, отже, їх побудова повинна відбуватися окремо. У наведених вище прикладах це питання не виникало, оскільки вони базувалися на автоматичному створенні конструкторів, що використовуються в C# за замовчуванням. Але на практиці конструктори визначаються у більшості класів. Нижче буде показано, яким чином вирішується подібна ситуація.

Якщо конструктор визначений тільки в похідному класі, то все відбувається дуже просто: конструюється об'єкт похідного класу, а базова частина об'єкта автома тично конструюється його конструктором, що використовується за замовчуванням. Як приклад нижче наведено перероблений варіант класу Triangle в якому визначається конструктор, а член Style робиться закритим, оскільки тепер він встановлюється конструктором.

Лістинг 11.6 - Додати конструктор в клас Triangle

// Клас для двовимірних об'єктів.

class TwoDShape

{

double pri_width;

double pr.i_height;

// Властивості ширини і довжини об'єкта.

public double Width

{

get { return pri_width; }

set { pri_width = value < 0 ? value: value; }

}

public double Height

{

get { return pri_height; }

set { pri_height = value < 0 ? value: value; }

}

public void ShowDim()

{

Console.WriteLine("Ширина і довжина дорівнюють " +

Width + " і " + Height);

}

}

// Клас для трикутників, похідний від класу TwoDShape.

class Triangle : TwoDShape

{

string Style;

// Конструктор.

public Triangle(string s, double w, double h)

{

Width = w; // ініціалізувати член базового класу

Height = h; // ініціалізувати член базового класу

Style = s; // ініціалізувати член похідного класу

}

// Повернути площу трикутника.

public double Area()

{

return Width * Height / 2;

}

// Показати тип трикутника.

public void ShowStyle()

{

Console.WriteLine("Трикутник " + Style);

}

}

У даному прикладі конструктор класу Triangle ініціалізує успадковані члени класу TwoDShape разом з його власним полем Style. Коли конструктори визначаються як у базовому, так і в похідному класі, процес побудови об'єкта дещо ускладнюється, оскільки повинні виконуватися конструктори обох класів. У даному випадку доводиться звертатися до ще одного ключового слова мови C#: base , яке має подвійне застосування: по-перше, для виклику конструктора базового класу; і по-друге, для доступу до члена базового класу, що приховується за членом похідного класу. Нижче буде розглянуто перше при зміна ключового слова base.
