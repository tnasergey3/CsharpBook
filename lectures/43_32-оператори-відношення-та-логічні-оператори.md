---
layout: default
title: "3.2 Оператори відношення та логічні оператори"
---

# 3.2 Оператори відношення та логічні оператори

У позначеннях оператор відношення і логічний оператор термін відношення означає взаємозв'язок, який може існувати між двома значеннями, а термін логічний — взаємозв'язок між логічними значеннями "істина" і "хиба". І оскільки оператори відношення дають істинні або хибні результати, то вони часто використовуються разом з логічними операторами. Саме з цієї причини вони і розглядаються разом у цьому розділі.

Нижче перераховані оператори відношення (таблиця 3.2).

Таблиця 3.2 – Оператори відношення

Оператор

Значення

==

Дорівнює

!=

Не дорівнює

>

Більше

<

Менше

>=

Більше або дорівнює

<=

Менше або дорівнює

&

І

|

АБО

^

Виключене АБО

&&

Скорочене І

| |

Скорочене АБО

!

Не

Результатом виконання оператора відношення або логічного оператора є логічне значення типу bool.

В цілому, об'єкти можна порівнювати на рівність або нерівність, використовуючи оператори відношення == та !=. А оператори порівняння < , > , <= або >= можуть застосовуватися тільки до тих типів даних, які підтримують відношення порядку. Отже, оператори відношення можна застосовувати до всіх числових типів даних. Але значення типу bool можуть порівнюватися тільки на рівність або нерівність, оскільки істинні ( true ) і хибні ( false ) значення не упорядковуються. Наприклад, порівняння true > false в C# не має сенсу.

Операнди логічних операторів повинні належати до типу bool , а результат виконання логічної операції також належить до типу bool . Логічні оператори & , | , ^ і ! підтримують основні логічні операції І, АБО, виключне АБО і НЕ згідно з наведеною нижче таблицею істинності (таблиця 3.3).

Таблиця 3.3. Таблиця істинності

p

q

p & q

p | q

p ^ q

!p

false

false

false

false

false

true

true

false

false

true

true

false

false

true

false

true

true

true

true

true

true

true

false

false

Як випливає з наведеної вище таблиці, результатом виконання логічної операції виключне АБО буде істинне значення (true), якщо один і тільки один з її операндів має значення true.

Нижче наведений приклад програми, що демонструє застосування декількох операторів відношення та логічних операторів (лістинг 3.5).

Лістинг 3.5 – Застосування операторів відношення та логічних операторів

// Показати застосування операторів відношення та логічних операторів.

using System;

class RelLogOps

{

static void Main()

{

int i, j;

bool b1, b2;

i = 10;

j = 11;

if (i < j) Console.WriteLine("i < j");

if (i <= j) Console.WriteLine("i <= j");

if (i != j) Console.WriteLine("i != j");

if (i == j) Console.WriteLine("Неможливо виконати");

if (i >= j) Console.WriteLine("Неможливо виконати");

if (i > j) Console.WriteLine("Неможливо виконати");

b1 = true;

b2 = false;

if (b1 & b2) Console.WriteLine("Неможливо виконати");

if (!(b1 & b2)) Console.WriteLine("!(b1 & b2) - true");

if (b1 | b2) Console.WriteLine("b1 | b2 - true");

if (b1 ^ b2) Console.WriteLine("b1 ^ b2 - true");

}

}

Виконання цієї програми дає наступний результат.

i < j

i <= j

i != j

!(b1 & b2) — true

b1 | b2 — true

b1 ^ b2 — true

Логічні оператори в C# виконують найпоширеніші логічні операції. Тим не менш існує ряд операцій, що виконуються за правилами формальної логіки. Ці логічні оператори можуть бути побудовані за допомогою логічних операторів, підтримуваних в С#. Отже, в C# передбачений такий на бір логічних операторів, якого достатньо для побудови практично будь-якої логічної операції, включаючи імплікацію. Імплікація — це двійкова операція, результатом якої є хибне значення тільки у випадку, якщо лівий операнд має істинне значення, а правий — хибне. (Операція імплікації від ображає наступний принцип: істина не може підтверджувати хибне.) Нижче наведена таблиця істинності для операції імплікації (таблиця 3.4).

Таблиця 3.4 – Таблиця істинності для операції імплікації

p

q

Результат імплікації p і q

true

true

true

true

false

false

false

false

true

false

true

true

Операція імплікації може бути побудована на основі комбінації логічних операторів ! і |, як у наведеному нижче коді (лістинг 3.6).

Лістинг 3.6 – Побудова операції імплікації

!р | q

У наступному прикладі програми демонструється подібна реалізація операції імплікації (лістинг 3.7).

Лістинг 3.7 – Демонстрація реалізації операції імплікації

// Побудова операції імплікації в С#.

using System;

class Implication

{

static void Main()

{

bool p = false, q = false;

int i, j;

for (i = 0; i < 2; i++)

{

for (j = 0; j < 2; j++)

{

if (i == 0) p = true;

if (i == 1) p = false;

if (j == 0) q = true;

if (j == 1) q = false;

Console.WriteLine("p дорівнює " + p + ", q дорівнює " + q);

if (!p | q) Console.WriteLine("Результат імплікації" + p + " і " + q +

" дорівнює " + true);

Console.WriteLine();

}

}

}

}

Результат виконання цієї програми виглядає так.

p дорівнює True, q дорівнює True

Результат імплікації True і True дорівнює True

p дорівнює True, q дорівнює False

p дорівнює False, q дорівнює False

Результат імплікації False і True дорівнює True

p дорівнює False, q дорівнює False

Результат імплікації False і False дорівнює True

### 3.2.1 Скорочені логічні оператори

У C# також передбачені спеціальні, скорочені, варіанти логічних операторів І і АБО, призначені для отримання більш ефективного коду. Пояснимо це на наступних прикладах логічних операцій. Якщо перший операнд логічної операції І має хибне значення ( false ), то її результат буде мати хибне значення незалежно від значення другого операнда. Якщо ж перший операнд логічної операції АБО має істинне значення ( true ), то її результат буде мати істинне значення незалежно від значення другого операнда. Завдяки тому, що значення другого операнда в цих операціях обчислювати не потрібно, економиться час і підвищується ефективність коду.

Скорочена логічна операція І виконується за допомогою оператора && , а скорочена логічна операція АБО - за допомогою оператора || . Цим скороченим логічним операторам відповідають звичайні логічні оператори & і | . Єдине відмінність скороченого логічного оператора від звичайного полягає в тому, що другий операнд обчислюється лише за необхідністю.

У наведеному нижче прикладі програми демонструється застосування скороченого логічного оператора І. У цій програмі за допомогою операції ділення за модулем визначається наступне: чи ділиться значення змінної d на значення змінної n націло. Якщо залишок від ділення n/d дорівнює нулю, то n ділиться на d націло. Але оскільки ця операція передбачає ділення, то для перевірки умови ділення на нуль використовується скорочений логічний оператор І (лістинг 3.8).

Лістинг 3.8 – Застосування скорочених логічних операторів

// Показати застосування скорочених логічних операторів.

using System;

class SCops

{

static void Main()

{

int n, d;

n = 10;

d = 2;

if (d != 0 && (n % d) == 0)

Console.WriteLine(n + " ділиться націло на " + d);

d = 0; // задати нульове значення змінної d

// d дорівнює нулю, тому другий операнд не обчислюється

if (d != 0 && (n % d) == 0)

Console.WriteLine(n + " ділиться націло на " + d);

// Якщо тепер спробувати зробити те саме без скороченого

// логічного оператора, то виникне помилка через ділення на нуль.

if (d != 0 & (n % d) == 0)

Console.WriteLine(n + " ділиться націло на " + d);

}

}

Для уникнення помилки, пов'язаної з діленням на нуль в операторі if спочатку перевіряється умова: чи дорівнює нулю значення змінної d. Якщо воно дорівнює нулю, то виконання скороченого логічного оператора І завершується, а наступна операція ділення за модулем не виконується. Так, при першій перевірці значення змінної d виявляється рівним 2, тому виконується операція ділення за модулем. А при другій перевірці це значення виявляється рівним нулю, отже, операція ділення за модулем пропускається, щоб уникнути ділення на нуль. І нарешті, виконується звичайний логічний оператор І, коли обчислюються обидва операнди. Якщо при цьому відбувається ділення на нуль, то виникає помилка при виконанні.

Скорочені логічні оператори іноді виявляються більш ефективними, ніж їх звичайні аналоги. Так для чого ж потрібні звичайні логічні оператори І та АБО? Справа в тому, що в деяких випадках потрібно обчислювати обидва операнди логічної операції І або АБО через виникаючі побічні ефекти. Розглянемо наступний приклад програми (лістинг 3.9).

Лістинг 3.9 – Застосування скорочених логічних операторів

//  Продемонструвати значення побічних ефектів.

using System;

class SideEffects

{

static void Main()

{

int i;

bool someCondition = false;

i = 0;

// Значення змінної i інкрементується, незважаючи на те,

// що оператор if не виконується.

if (someCondition & (++i < 100))

Console.WriteLine("He виводиться");

Console.WriteLine("Оператор if виконується: " + i);

// виводиться 1

// У даному випадку значення змінної i не інкрементується,

// оскільки інкремент в скороченому логічному операторі

// опускається.

if (someCondition && (++i < 100))

Console.WriteLine("He виводиться");

Console.WriteLine("Оператор if виконується: " + i);

// як і раніше 1 !!

}

}

По-перше звернімо увагу на те, що змінна someCondition типу bool ініціалізується значенням false . Далі проаналізуємо кожен оператор if . Як випливає з коментарів до цієї програми, в першому операторі if змінна i інкрементується, незважаючи на те, що значення змінної someCondition дорівнює false. Коли застосовується логічний оператор & , як це має місце в першому операторі if, вираз у правій частині цього оператора обчислюється незалежно від значення виразу у його лівій частині. А в другому операторі if застосовується скоро чений логічний оператор. У цьому випадку значення змінної i не інкрементується, оскільки лівий операнд (змінна someCondition) має значення false, отже, вираз у правій частині даного оператора пропускається. З цього випливає висновок: якщо в коді передбачається обчислення правого операнда логічної операції І або АБО, то необхідно користуватися нескороченими формами логічних операцій, доступних у С#.

І останнє зауваження: скорочений оператор І також називається умовним логічним оператором І, а скорочений оператор АБО — умовним логічним оператором АБО.
