---
layout: default
title: "10.3 Індексатори без базового масиву"
---

# 10.3 Індексатори без базового масиву

Слід особливо підкреслити, що індексатор зовсім не обов'язково повинен працювати з масивом. Його основне призначення - надати користувачу функціональні можливості, аналогічні масиву. Як приклад у наведеній нижче програмі демонструється індексатор, що виконує роль масиву лише для читання, що містить степені числа 2 від 0 до 15. Зверніть увагу на те, що в цій програмі відсутній конкретний масив. Замість цього індексатор просто обчислює підходяще значення для заданого індексу.

Лістинг 10.6 - Індексатори зовсім не обов'язково повинні оперувати окремими масивами.

using System;

class PwrOfTwo

{

/* Доступ до логічного масиву, що містить степені

числа 2 від 0 до 15. */

public int this[int index]

{

// Обчислити і повернути степінь числа 2.

get

{

if ((index >= 0) && (index < 16)) return pwr(index);

else return 1;

}

// Аксесор set відсутній.

}

int pwr(int p)

{

int result = 1;

for (int i = 0; i < p; i++)

result *= 2;

return result;

}

}

class UsePwrOfTwo

{

static void Main()

{

PwrOfTwo pwr = new PwrOfTwo();

Console.Write("Перші 8 степенів числа 2: ");

for (int i = 0; i < 8; i++)

Console.Write(pwr[i] + " ");

Console.WriteLine();

Console.Write("А ось деякі помилки: ");

Console.Write(pwr[1] + " " + pwr[17]);

Console.WriteLine();

}

}

Зверніть увагу на те, що в індексатор класу PwrOfTwo включений лише аксесор get , але він не має аксесора set . Як пояснювалося вище, такий індексатор призначений лише для читання. Отже, об'єкт класу PwrOfTwo може бути вказаний лише в правій частині оператора присвоєння, а не в його лівій частині. Наприклад, спроба ввести наступний рядок коду в показану вище програму не призведе до бажаного результату. pwr[0] = 11; // не підлягає компіляції Такий оператор присвоєння стане причиною появи помилки під час компіляції, оскільки для індексатора не визначений аксесор set. На застосування індексаторів накладаються два суттєві обмеження. По-перше, значення, яке повертає індексатор, не можна передавати методу як параметр ref або out, оскільки в індексаторі не визначено місце в пам'яті для його зберігання. І по-друге, індексатор.
